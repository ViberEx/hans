# Lovable Cloud

Lovable Cloud 是集成的后端服务，为您的应用提供数据库、认证、存储和云函数等完整的后端能力。

## 什么是 Lovable Cloud

Lovable Cloud 基于 Supabase 构建，提供：

- 🗄️ **PostgreSQL 数据库**: 存储应用数据
- 🔐 **用户认证**: 邮箱、手机、Google 登录
- 📦 **文件存储**: 图片、文档等文件管理
- ⚡ **Edge Functions**: 无服务器的后端逻辑
- 🔒 **权限管理**: 行级安全策略 (RLS)

## 启用 Lovable Cloud

### 方法 1: 通过对话启用

当您需要后端功能时，直接告诉 Lovable：

```
我需要添加用户登录功能
```

或

```
把数据保存到数据库
```

Lovable 会自动提示您启用 Cloud。

### 方法 2: 手动启用

1. 在项目界面点击 **"Cloud"** 标签
2. 点击 **"启用 Lovable Cloud"**
3. 等待后端服务初始化（通常 1-2 分钟）

## 核心功能

### 数据库

自动生成的 PostgreSQL 数据库：

```
创建一个用户信息表，包含：
- 用户名
- 邮箱
- 头像 URL
- 创建时间
```

Lovable 会：
1. 创建数据表
2. 生成前端查询代码
3. 配置权限策略

#### 管理数据

在 Cloud 标签中：
- 📊 查看表结构
- ➕ 添加/编辑数据
- 🔍 查询和筛选
- 🗑️ 删除记录

### 用户认证

支持多种认证方式：

```
添加用户登录功能，支持邮箱和密码登录
```

自动包含：
- 注册页面
- 登录页面
- 忘记密码流程
- 受保护的路由

#### OAuth 登录

```
添加 Google 登录按钮
```

需要在 Cloud 设置中配置 OAuth 应用。

### 文件存储

上传和管理文件：

```
添加用户头像上传功能
```

文件存储特性：
- 自动生成公开 URL
- 支持图片、视频、文档
- 可设置访问权限
- CDN 加速

### Edge Functions

运行后端逻辑：

```
创建一个 API 接口，发送邮件通知
```

使用场景：
- 调用第三方 API
- 数据处理和计算
- 定时任务
- Webhook 处理

## 数据安全

### 行级安全 (RLS)

Lovable Cloud 自动配置权限策略：

```
确保用户只能看到和修改自己的数据
```

RLS 策略示例：
- 用户只能读取自己的订单
- 管理员可以查看所有数据
- 匿名用户只能读取公开内容

### API 密钥管理

敏感信息使用 Secrets 管理：

```
添加 Stripe 支付功能
```

Lovable 会提示您安全地添加 API 密钥。

## 实际案例

### 案例 1: 博客系统

```
创建一个博客应用：
1. 文章表（标题、内容、作者、发布时间）
2. 用户只能编辑自己的文章
3. 所有人可以阅读已发布的文章
```

### 案例 2: 任务管理

```
添加任务列表功能：
- 用户登录后才能使用
- 每个用户只能看到自己的任务
- 支持添加、编辑、删除、标记完成
```

### 案例 3: 图片分享

```
创建图片分享社区：
- 用户上传图片到存储桶
- 图片信息保存到数据库
- 显示所有用户上传的图片墙
```

## 常见工作流

### 1. 创建数据模型

```
创建 [表名] 表，包含以下字段：
- [字段 1]: [类型]
- [字段 2]: [类型]
```

### 2. 实现 CRUD 操作

```
实现 [功能]：
- 显示列表
- 添加新项
- 编辑已有项
- 删除功能
```

### 3. 添加权限控制

```
添加权限规则：
- [角色] 可以 [操作]
- [角色] 不能 [操作]
```

## 查看和管理

在 Cloud 标签中：

### Database 子标签
- 查看所有数据表
- 手动添加/编辑数据
- 查看表结构和关系

### Authentication 子标签
- 管理用户账号
- 查看登录日志
- 配置认证设置

### Storage 子标签
- 查看存储桶
- 管理上传的文件
- 配置访问策略

### Edge Functions 子标签
- 查看所有函数
- 查看函数日志
- 测试 API 端点

## 定价

Lovable Cloud 使用基于用量的定价：

- **免费额度**: 每月包含一定免费用量
- **按需付费**: 超出后按实际使用计费

查看详细定价：[lovable.dev/pricing](https://lovable.dev/pricing)

## 最佳实践

### 1. 合理设计数据表

- 明确表之间的关系
- 使用外键约束
- 添加索引优化查询

### 2. 正确配置 RLS

- 默认拒绝所有访问
- 仅开放必要的权限
- 测试不同角色的访问

### 3. 优化 API 调用

- 避免在循环中查询数据库
- 使用批量操作
- 合理使用缓存

### 4. 监控使用量

- 定期查看数据库大小
- 监控 API 调用次数
- 优化存储策略

## 下一步

- 📊 深入学习 [数据库](database) 操作
- 🔐 了解 [用户认证](authentication) 详情
- 🚀 准备 [部署应用](deployment)
